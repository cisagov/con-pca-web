<div>
  <mat-card>
    <div class="mb-3">
      <mat-table [dataSource]="tasks">
        <ng-container matColumnDef="message_type">
          <mat-header-cell *matHeaderCellDef>Task</mat-header-cell>
          <mat-cell *matCellDef="let row">
            {{ row.task_type }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="scheduled_date">
          <mat-header-cell *matHeaderCellDef>Scheduled Time</mat-header-cell>
          <mat-cell *matCellDef="let row">
            {{ row.scheduled_date | date : "long" }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="executed">
          <mat-header-cell *matHeaderCellDef>Executed</mat-header-cell>
          <mat-cell *matCellDef="let row">
            {{ row.executed }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="executed_date">
          <mat-header-cell *matHeaderCellDef>Executed Time</mat-header-cell>
          <mat-cell *matCellDef="let row">
            {{ row.executed_date | date : "long" }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="error">
          <mat-header-cell *matHeaderCellDef>Error</mat-header-cell>
          <mat-cell *matCellDef="let row">
            {{ row.error }}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row
          class="table-row"
          *matRowDef="let row; columns: displayedColumns"
        ></mat-row>
      </mat-table>
    </div>
  </mat-card>
  <mat-card>
    <mat-label class="h6" style="margin-top: 100px">Troubleshooting</mat-label>
    <table class="table" style="max-width: 33rem; margin-top: 25px">
      <tr>
        <td>Processing</td>
        <td>{{ processing }}</td>
      </tr>
    </table>
    <div class="text-muted">
      If processing is set to true for longer than 30 minutes and tasks are
      overdue, try resetting processing for this subscription
    </div>
    <button
      mat-raised-button
      color="primary"
      class="mb-3"
      (click)="resetSubscriptionProcessing()"
    >
      Reset Processing
    </button>
  </mat-card>
</div>
